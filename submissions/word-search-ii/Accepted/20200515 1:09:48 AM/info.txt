{"id":339327296,"lang":"python3","time":"1 year, 2 months","timestamp":1589472588,"status_display":"Accepted","runtime":"328 ms","url":"/submissions/detail/339327296/","is_pending":"Not Pending","title":"Word Search II","memory":"37 MB","code":"from collections import defaultdict\n\nclass TrieNode:\n    def __init__(self):\n        self.nexts = defaultdict(TrieNode)\n        self.is_word = False\n\nclass Solution:\n    def __init__(self):\n        self.ans = set()\n        \n    def backtrack(self, y, x, cur_node, par_node, word_list, board, visited):\n        if len(self.ans) == len(self.words):\n            return\n        if cur_node.is_word:\n            word = ''.join(word_list)\n            self.ans.add(word)\n        if not cur_node.nexts:\n            par_node.nexts.pop(word_list[-1])\n        neighbors = [(y+1, x), (y-1, x), (y, x+1), (y, x-1)]\n        for ny, nx in neighbors:\n            if 0 <= ny < len(board) and 0 <= nx < len(board[0]) and (ny, nx) not in visited:\n                char = board[ny][nx]\n                if char in cur_node.nexts:\n                    nx_node = cur_node.nexts[char]\n                    visited.add((ny, nx))\n                    word_list.append(char)\n                    self.backtrack(ny, nx, nx_node, cur_node, word_list, board, visited)\n                    visited.remove((ny, nx))\n                    word_list.pop()\n\n    def findWords(self, board, words):\n        self.root = TrieNode()\n        self.words = words\n        for word in words:\n            cur = self.root\n            for char in word:\n                if char not in cur.nexts:\n                    cur.nexts[char] = TrieNode()\n                cur = cur.nexts[char]\n            cur.is_word = True\n        \n        for y in range(len(board)):\n            for x in range(len(board[0])):\n                char = board[y][x]\n                if char in self.root.nexts:\n                    cur_node = self.root.nexts[char]\n                    word_list = [char]\n                    visited = {(y, x)}\n                    self.backtrack(y, x, cur_node, self.root, word_list, board, visited)\n                    \n        return list(self.ans)\n\n","compare_result":"111111111111111111111111111111111111","title_slug":"word-search-ii"}
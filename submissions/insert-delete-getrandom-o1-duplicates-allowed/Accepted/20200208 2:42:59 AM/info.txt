{"id":301104589,"lang":"python3","time":"1 year, 5 months","timestamp":1581097379,"status_display":"Accepted","runtime":"108 ms","url":"/submissions/detail/301104589/","is_pending":"Not Pending","title":"Insert Delete GetRandom O(1) - Duplicates allowed","memory":"18.2 MB","code":"from collections import defaultdict\nfrom random import choice\n\nclass RandomizedCollection:\n\n    def __init__(self):\n        self.val2idx = defaultdict(set)\n        self.list = []\n\n    def insert(self, val):\n        res = (val not in self.val2idx.keys())\n        idx = len(self.list)\n        self.val2idx[val].add(idx)\n        self.list.append(val)\n        return res\n        \n    def remove(self, val):\n        if len(self.val2idx[val]) > 0:\n            last_item = self.list[-1]\n            rm_idx = self.val2idx[val].pop()\n            self.val2idx[last_item].add(rm_idx)\n            self.val2idx[last_item].remove(len(self.list)-1)\n            self.list[rm_idx] = last_item\n            self.list.pop()\n            return True\n        else:\n            return False\n\n    def getRandom(self):\n        return choice(self.list)\n\n\n# Your RandomizedCollection object will be instantiated and called as such:\n# obj = RandomizedCollection()\n# param_1 = obj.insert(val)\n# param_2 = obj.remove(val)\n# param_3 = obj.getRandom()","compare_result":"1111111111111111111111111111","title_slug":"insert-delete-getrandom-o1-duplicates-allowed"}